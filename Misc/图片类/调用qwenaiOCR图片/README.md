# 验证码OCR识别程序

这个Python程序使用通义千问API对指定文件夹下的图片验证码进行OCR识别，提取其中的4位数字验证码。

## 功能特点

1. 自动遍历目标文件夹中按数字顺序命名的图片文件
2. 调用通义千问API进行OCR识别
3. 自动清洗识别结果，确保仅保留4位数字
4. 实现错误重试机制，提高识别成功率
5. 异常处理机制，处理API调用超时、网络错误等情况
6. 按图片命名顺序输出识别结果

## 环境要求

- Python 3.6+
- requests 库

## 安装依赖

```bash
pip install requests
```

## 使用方法

1. 获取通义千问API Key：
   - 访问阿里云通义千问控制台
   - 创建API密钥并复制

2. 配置程序：
   - 打开 `ocr_captcha.py` 文件
   - 将 `API_KEY` 变量的值替换为您的实际API Key

3. 运行程序：
   ```bash
   python ocr_captcha.py
   ```

## 配置说明

- `API_KEY`：通义千问API密钥
- `API_URL`：API调用地址（一般无需修改）
- `max_retries`：单张图片最大重试次数（默认3次）

## 结果输出

1. 程序会在控制台显示每张图片的识别结果
2. 最终会输出一个包含所有成功识别结果的列表
3. 识别结果会保存到 `ocr_results.txt` 文件中，每行一个结果

## 注意事项

1. 确保图片文件按数字顺序命名（如0.png, 1.png, 2.png等）
2. 每张图片应包含清晰的4位数字验证码
3. API调用可能会产生费用，请参考阿里云通义千问的计费标准
4. 为避免请求过快导致API限制，程序在处理每张图片后会暂停0.5秒